<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Be My Valentine?</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">

<style>
body{
    background:#ffdde1;
    display:flex;
    justify-content:center;
    align-items:center;
    min-height:100vh;
    margin:0;
    font-family:'Poppins',sans-serif;
    overflow: hidden;
    position: relative;
}

/* Container */
.container{
    background:white;
    padding:20px;
    border-radius:20px;
    box-shadow:0 10px 25px rgba(0,0,0,0.15);
    width:95%;
    max-width:420px;
    text-align:center;
    position:relative;
    z-index:10;
}

/* Heading */
h1{
    color:#d63384;
    font-size:22px;
    margin:15px 0;
}

/* Slideshow */
.slideshow{
    width:90%;
    max-width:350px;
    max-height:250px;
    border-radius:15px;
    overflow:hidden;
    background:#f2f2f2;
    margin:0 auto;
}

.slideshow img{
    width:100%;
    max-height:250px;
    display:none;
    object-fit:cover;
}

.slideshow img.active{
    display:block;
}

/* Buttons */
.buttons{
    display:flex;
    justify-content:center;
    gap:20px;
    margin-top:20px;
    position:relative;
}

button{
    padding:12px 20px;
    font-size:16px;
    border:none;
    border-radius:10px;
    cursor:pointer;
    position:relative;
    z-index:11;
}

#yesBtn{
    background:#ff4d6d;
    color:white;
}

#noBtn{
    background:#6c757d;
    color:white;
}

/* Success video */
video{
    width:90%;
    max-width:350px;
    max-height:250px;
    border-radius:15px;
    margin-top:15px;
    display:block;
    margin-left:auto;
    margin-right:auto;
}

/* Confetti Canvas */
#confettiCanvas{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    pointer-events:none;
    z-index:9;
}

/* Hearts Canvas */
#heartsCanvas{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    pointer-events:none;
    z-index:0;
}

/* Hidden */
.hidden{
    display:none;
}

/* Extra line styling */
#extraLine{
    font-size:16px;
    color:#d63384;
    margin-top:10px;
}
</style>
</head>

<body>

<!-- Hearts Canvas for background -->
<canvas id="heartsCanvas"></canvas>

<div class="container">

<!-- Proposal -->
<div id="proposalContent">

<div class="slideshow">
    <img src="tiddii1.jpg" class="active">
    <img src="tiddii2.jpg">
    <img src="tiddii3.jpg">
    <img src="tiddii4.jpg">
</div>

<h1>Will You Be Mine Tiiddiii Forever? üëâüëàüòñ</h1>

<div class="buttons">
    <button id="yesBtn">Yes</button>
    <button id="noBtn">No</button>
</div>
</div>

<!-- Success -->
<div id="successMessage" class="hidden">
<h1>I Knew It! ‚ù§Ô∏è</h1>

<video autoplay muted loop playsinline controls>
  <source src="mine.mp4" type="video/mp4">
</video>

<p id="extraLine">From the Bottom of My Heart, I really really Respect You and Your Uncountable Efforts a lot and I bery bery Lub u TIIDDIIIüòã.</p>

<!-- Confetti Canvas -->
<canvas id="confettiCanvas"></canvas>
</div>
</div>

<script>
const noBtn = document.getElementById('noBtn');
const yesBtn = document.getElementById('yesBtn');
const proposalContent = document.getElementById('proposalContent');
const successMessage = document.getElementById('successMessage');

let noClicked = false; // track No click

/* --- No Button Behavior --- */
const noTexts = ["No", "HUHü•±üòí"];

noBtn.addEventListener('click', () => {
    noClicked = true;
    moveNoButton();
});

function moveNoButton() {
    const container = document.querySelector('.container');
    const rect = container.getBoundingClientRect();

    const maxX = rect.width - 100;
    const maxY = rect.height - 50;

    const x = Math.random() * maxX;
    const y = Math.random() * maxY;

    noBtn.style.position = "absolute";
    noBtn.style.left = x + "px";
    noBtn.style.top = y + "px";

    // toggle text each click
    const randomText = noTexts[Math.floor(Math.random() * noTexts.length)];
    noBtn.textContent = randomText;
}

/* --- Slideshow --- */
const slides = document.querySelectorAll(".slideshow img");
let index = 0;

setInterval(()=>{
    slides[index].classList.remove("active");
    index = (index + 1) % slides.length;
    slides[index].classList.add("active");
},2000);

/* --- Background Hearts Animation --- */
const heartsCanvas = document.getElementById('heartsCanvas');
const hctx = heartsCanvas.getContext('2d');
heartsCanvas.width = window.innerWidth;
heartsCanvas.height = window.innerHeight;

const hearts = [];
for(let i=0;i<50;i++){
    hearts.push({
        x: Math.random()*heartsCanvas.width,
        y: Math.random()*heartsCanvas.height,
        size: Math.random()*20 + 10,
        speed: Math.random()*1 + 0.5,
        alpha: Math.random()*0.5 + 0.5
    });
}

function drawHearts(){
    hctx.clearRect(0,0,heartsCanvas.width,heartsCanvas.height);
    hearts.forEach(h => {
        hctx.fillStyle = `rgba(255,0,128,${h.alpha})`;
        hctx.beginPath();
        hctx.moveTo(h.x, h.y);
        hctx.bezierCurveTo(h.x, h.y - h.size/2, h.x - h.size/2, h.y - h.size, h.x, h.y - h.size);
        hctx.bezierCurveTo(h.x + h.size/2, h.y - h.size, h.x, h.y - h.size/2, h.x, h.y);
        hctx.fill();

        h.y -= h.speed;
        if(h.y < -20){
            h.y = heartsCanvas.height + 20;
            h.x = Math.random()*heartsCanvas.width;
        }
    });
    requestAnimationFrame(drawHearts);
}
drawHearts();

/* --- Yes Button Click --- */
yesBtn.addEventListener('click', ()=>{
    proposalContent.classList.add('hidden');
    successMessage.classList.remove('hidden');
    document.body.style.background="#ff4d6d";

    launchConfettiAndFireworks();
});

/* --- Confetti + Fireworks --- */
function launchConfettiAndFireworks(){
  const canvas = document.getElementById('confettiCanvas');
  const ctx = canvas.getContext('2d');

  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  /* Confetti Particles */
  const confettiParticles = [];
  for(let i=0;i<200;i++){
    confettiParticles.push({
      x: Math.random()*canvas.width,
      y: Math.random()*canvas.height - canvas.height,
      r: Math.random()*6 + 4,
      d: Math.random()*200 + 100,
      color: `hsl(${Math.random()*360}, 100%, 50%)`,
      tilt: Math.random()*10 - 10,
      tiltAngleIncrement: Math.random()*0.07 + 0.05,
      tiltAngle: 0
    });
  }

  /* Fireworks Particles */
  const fireworks = [];
  function createFirework(){
    const x = Math.random()*canvas.width;
    const y = Math.random()*canvas.height/2;
    const colors = [`#ff4d6d`, `#ffd700`, `#00ffff`, `#ff69b4`, `#ff8c00`];
    for(let i=0;i<50;i++){
      fireworks.push({
        x: x,
        y: y,
        vx: (Math.random()-0.5)*8,
        vy: (Math.random()-1.5)*8,
        alpha: 1,
        color: colors[Math.floor(Math.random()*colors.length)],
        life: 0
      });
    }
  }

  setInterval(createFirework, 800);

  /* Animation Loop */
  const startTime = Date.now();
  function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    /* Draw Confetti */
    confettiParticles.forEach(p => {
      ctx.beginPath();
      ctx.lineWidth = p.r/2;
      ctx.strokeStyle = p.color;
      ctx.moveTo(p.x + p.tilt + p.r/4, p.y);
      ctx.lineTo(p.x + p.tilt, p.y + p.tilt + p.r/4);
      ctx.stroke();

      p.tiltAngle += p.tiltAngleIncrement;
      p.y += (Math.cos(p.d) + 3 + p.r/2)/2;
      p.x += Math.sin(p.d);
      p.tilt = Math.sin(p.tiltAngle) * 15;

      if(p.y > canvas.height){
        p.y = -10;
        p.x = Math.random()*canvas.width;
      }
    });

    /* Draw Fireworks */
    for(let i=fireworks.length-1;i>=0;i--){
      let f = fireworks[i];
      ctx.beginPath();
      ctx.globalAlpha = f.alpha;
      ctx.fillStyle = f.color;
      ctx.arc(f.x, f.y, 3, 0, Math.PI*2);
      ctx.fill();

      f.x += f.vx;
      f.y += f.vy;
      f.vy += 0.1;
      f.alpha -= 0.01;
      f.life +=1;

      if(f.alpha <=0){
        fireworks.splice(i,1);
      }
    }
    ctx.globalAlpha = 1;

    if(Date.now() - startTime < 33000){ // 33 sec effect
        requestAnimationFrame(draw);
    }
  }

  draw();
}
</script>

</body>
</html>
